{"version":3,"file":"static/js/571.51051cd8.chunk.js","mappings":"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","sources":["common/confetti.js","pages/admin/product/ProductCreate.js"],"sourcesContent":["import confetti from 'canvas-confetti'\n\nfunction randomInRange(min, max) {\n  min = Math.ceil(min)\n  max = Math.floor(max)\n  return Math.floor(Math.random() * (max - min + 1) + min)\n}\n\nexport const confettishow = () => {\n  confetti({\n    angle: randomInRange(55, 125),\n    spread: 360,\n    particleCount: 1200,\n    origin: { y: 0.6 },\n  })\n}\n","import React, { useState, useEffect } from 'react'\nimport {\n  AdminNav,\n  FormContainer,\n  ProductCreateForm,\n  FileUpload,\n} from '../../../components'\nimport { confettishow } from '../../../common/confetti'\nimport { useSelector } from 'react-redux'\nimport { toast } from 'react-toastify'\nimport { createProduct } from '../../../api/product'\nimport { useNavigate } from 'react-router-dom'\nimport { getCategories, getCategorySubs } from '../../../api/category'\nimport { Button, Col, Container, Spinner, Row } from 'react-bootstrap'\nimport axios from 'axios'\nimport Avatar from 'react-avatar'\n\nconst initialValues = {\n  title: '',\n  description: '',\n  price: '',\n  categories: [],\n  category: '',\n  subCategory: [],\n  quantity: '',\n  images: [],\n  brand: '',\n}\n\nconst ProductCreate = () => {\n  const [values, setValues] = useState(initialValues)\n  const [subOptions, setSubOptions] = useState([])\n  const [loading, setLoading] = useState(false)\n  const [showSub, setShowSub] = useState(false)\n  const [imageLoader, setImageLoader] = useState(false)\n\n  //multiselect\n  const [field, setField] = useState([])\n\n  const { user } = useSelector((state) => ({ ...state }))\n\n  const navigate = useNavigate()\n\n  useEffect(() => {\n    loadAllCategories()\n  }, [])\n\n  const loadAllCategories = () => {\n    getCategories()\n      .then((res) => {\n        setValues({ ...values, categories: res.data })\n      })\n      .catch((err) => {\n        toast.error('FETCHING CATEGORY ERROR')\n      })\n  }\n\n  const handleCategoryChange = (e) => {\n    e.preventDefault()\n    setValues({ ...values, subCategory: [], category: e.target.value })\n    if (e.target.value !== 'Please Select') {\n      setShowSub(true)\n      getCategorySubs(e.target.value)\n        .then((res) => {\n          console.log(res.data)\n          setSubOptions(res.data)\n        })\n        .catch((err) => {\n          console.log('ERROR IN FETCHING CATEGORY REFRESH')\n        })\n    }\n  }\n  const submitHandler = (e) => {\n    e.preventDefault()\n    values.subCategory = field\n    if(values.price <= 0){\n      return toast.error('PRICE CANNOT BE NEGATIVE or ZERO')\n    }\n    setLoading(true)\n    \n    createProduct(values, user.token)\n      .then((res) => {\n        toast.success(`${res.data.title} is Created`, {\n          position: 'top-right',\n          autoClose: 5000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true,\n          progress: undefined,\n        })\n        setLoading(false)\n        window.alert(`${res.data.title} is Created`)\n        window.location.reload()\n        confettishow()\n      })\n      .catch((err) => {\n        console.log(err)\n        setLoading(false)\n        toast.error(err.response.data.err, {\n          position: 'top-right',\n          autoClose: 5000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true,\n          progress: undefined,\n        })\n      })\n  }\n\n  const handleChange = (e) => {\n    if (e.target.name == 'quantity'){\n      e.target.value = Math.ceil(e.target.value)\n    }\n    setValues({ ...values, [e.target.name]: e.target.value })\n  }\n\n  const handleRemoveImage = (public_id) => {\n    setImageLoader(true)\n    axios\n      .post(\n        `${process.env.REACT_APP_API}/deleteimage`,\n        { public_id },\n        {\n          headers: {\n            authtoken: user ? user.token : '',\n          },\n        }\n      )\n      .then((res) => {\n        setImageLoader(false)\n        const { images } = values\n        let filteredImages = images.filter((image) => {\n          return image.public_id !== public_id\n        })\n        setValues({ ...values, images: filteredImages })\n      })\n      .catch((err) => {\n        setImageLoader(false)\n        console.log(err)\n      })\n  }\n\n  return (\n    <>\n      {loading ? (\n        <h3>Loading</h3>\n      ) : (\n        <div className='container-fluid'>\n          <div className='row'>\n            <div className='col-md-2'>\n              <AdminNav />\n            </div>\n            <div className='col'>\n              <Container>\n                <Row className='d-flex justify-content-between'>\n                  {imageLoader ? (\n                    <Spinner animation='border' variant='danger' />\n                  ) : (\n                    <>\n                      {values.images &&\n                        values.images.map((image) => (\n                          <Col\n                            className='mb-3'\n                            sm={12}\n                            md={6}\n                            lg={4}\n                            xl={3}\n                            key={image.public_id}\n                          >\n                            <div\n                              className='item'\n                              style={{\n                                position: 'relative',\n                                paddingTop: '20px',\n                                display: 'inline-block',\n                              }}\n                            >\n                              <span\n                                className='notify-badge'\n                                style={{\n                                  position: 'absolute',\n                                  right: '-20px',\n                                  top: '10px',\n                                  background: 'red',\n                                  textAlign: 'center',\n                                  borderRadius: '30px',\n                                  color: 'white',\n                                  padding: '5px 10px',\n                                  fontSize: '20px',\n                                  cursor: 'pointer',\n                                }}\n                                onClick={() =>\n                                  handleRemoveImage(image.public_id)\n                                }\n                              >\n                                X\n                              </span>\n                              <Avatar round={true} src={image.url} />\n                            </div>\n                          </Col>\n                        ))}\n                    </>\n                  )}\n                </Row>\n              </Container>\n              <FormContainer>\n                <h2 className='text-center'>PRODUCT CREATE</h2>\n                <br />\n                <FileUpload\n                  values={values}\n                  setValues={setValues}\n                  setImageLoader={setImageLoader}\n                />{' '}\n                <br />\n                <ProductCreateForm\n                  values={values}\n                  submitHandler={submitHandler}\n                  handleChange={handleChange}\n                  handleCategoryChange={handleCategoryChange}\n                  subOptions={subOptions}\n                  showSub={showSub}\n                  setValues={setValues}\n                  setField={setField}\n                  field={field}\n                />\n              </FormContainer>\n            </div>\n          </div>\n        </div>\n      )}\n    </>\n  )\n}\n\nexport default ProductCreate\n"],"names":["confettishow","min","max","confetti","angle","Math","ceil","floor","random","spread","particleCount","origin","y","initialValues","title","description","price","categories","category","subCategory","quantity","images","brand","useState","values","setValues","subOptions","setSubOptions","loading","setLoading","showSub","setShowSub","imageLoader","setImageLoader","field","setField","user","useSelector","state","useNavigate","useEffect","loadAllCategories","getCategories","then","res","data","catch","err","toast","className","animation","variant","map","image","sm","md","lg","xl","style","position","paddingTop","display","right","top","background","textAlign","borderRadius","color","padding","fontSize","cursor","onClick","public_id","axios","process","headers","authtoken","token","filteredImages","filter","console","log","round","src","url","submitHandler","e","preventDefault","createProduct","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","window","alert","location","reload","response","handleChange","target","name","value","handleCategoryChange","getCategorySubs"],"sourceRoot":""}