{"version":3,"file":"static/js/348.76848785.chunk.js","mappings":"mPA8GA,UAtGsB,WACpB,OAA8BA,EAAAA,EAAAA,UAAS,IAAvC,eAAOC,EAAP,KAAgBC,EAAhB,KACA,GAA8BF,EAAAA,EAAAA,UAAS,IAAvC,eAAOG,EAAP,KAAgBC,EAAhB,KACA,GAA8BJ,EAAAA,EAAAA,WAAS,GAAvC,eAAOK,EAAP,KAAgBC,EAAhB,KACA,GAAwBN,EAAAA,EAAAA,UAAS,GAAjC,eAAOO,EAAP,KAAaC,EAAb,KACA,GAAwCR,EAAAA,EAAAA,WAAS,GAAjD,eAAOS,EAAP,KAAqBC,EAArB,KAEQC,GAASC,EAAAA,EAAAA,MAATD,KAEAE,GAASC,EAAAA,EAAAA,KAAY,SAACC,GAAD,iBAAiBA,MAAtCF,MAERG,EAAAA,EAAAA,YAAU,WACRC,MACC,CAACN,KAEJK,EAAAA,EAAAA,YAAU,WACR,GAAIf,EAAQiB,SAAWL,EAAM,CAC3B,IAAIM,EAAuBlB,EAAQiB,QAAQE,MACzC,SAACC,GAAD,OAASA,EAAIC,SAASC,YAAcV,EAAKW,IAAID,cAG/CJ,GAAwBX,EAAQW,EAAqBZ,UAIzD,IAAMU,EAAoB,WACxBX,GAAW,IACXmB,EAAAA,EAAAA,IAAkBd,GACfe,MAAK,SAACC,GACLrB,GAAW,GACXJ,EAAWyB,EAAIC,OAEfC,EAAAA,EAAAA,IAAkBF,EAAIC,KAAKJ,KAAKE,MAAK,SAACC,GACpCvB,EAAWuB,EAAIC,YAIlBE,OAAM,SAACC,GACNzB,GAAW,GACX0B,EAAAA,GAAAA,MAAYD,OAoBlB,OACE,8BACG1B,GACC,qCAEA,iCACE,0BACE,SAAC,KAAD,CACEJ,QAASA,EACTgC,YAzBQ,SAACC,EAAWC,GAC9B,IAAKD,EACH,OAAOF,EAAAA,GAAAA,MAAY,8BAErBxB,EAAQ0B,IACRE,EAAAA,EAAAA,IAAYD,EAAMD,EAAWrB,EAAKwB,OAC/BX,MAAK,SAACC,GACLV,IACAe,EAAAA,GAAAA,QAAc,+BAEfF,OAAM,SAACC,GACNO,QAAQC,IAAIR,OAeNxB,KAAMA,EACNG,gBAAiBA,EACjBD,aAAcA,OAGlB,mBACA,mBACA,mBACA,mBACA,UAAC,IAAD,YACE,SAAC,IAAD,CAAK+B,UAAU,MAAf,UACE,SAAC,IAAD,CAAKA,UAAU,wBAAf,UACE,eAAIC,MAAO,CAAEC,MAAO,SAApB,mCAGJ,gBAAKF,UAAU,WAAf,SACGrC,EAAQwC,OACPxC,EAAQyC,KAAI,SAACC,GAAD,OACV,gBAAuBL,UAAU,WAAjC,UACE,SAAC,KAAD,CAAavC,QAAS4C,KADdA,EAAQrB,SAKpB,gBAAKgB,UAAU,kBAAf","sources":["pages/ProductDetail.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { getProductDetails, productStar } from '../api/product'\nimport { useParams } from 'react-router-dom'\nimport { toast } from 'react-toastify'\nimport { ProductCard, ProductDetailCard } from '../components'\nimport { Col, Container, Row, Stack } from 'react-bootstrap'\nimport { useSelector } from 'react-redux'\nimport { getRelatedProduct } from '../api/product'\nconst ProductDetail = () => {\n  const [product, setProduct] = useState([])\n  const [related, setRelated] = useState([])\n  const [loading, setLoading] = useState(false)\n  const [star, setStar] = useState(0)\n  const [modalVisible, setModalVisible] = useState(false)\n\n  const { slug } = useParams()\n\n  const { user } = useSelector((state) => ({ ...state }))\n\n  useEffect(() => {\n    loadSingleProduct()\n  }, [slug])\n\n  useEffect(() => {\n    if (product.ratings && user) {\n      var existingRatingObject = product.ratings.find(\n        (ele) => ele.postedBy.toString() == user._id.toString()\n      )\n\n      existingRatingObject && setStar(existingRatingObject.star)\n    }\n  })\n\n  const loadSingleProduct = () => {\n    setLoading(true)\n    getProductDetails(slug)\n      .then((res) => {\n        setLoading(false)\n        setProduct(res.data)\n        //loading related\n        getRelatedProduct(res.data._id).then((res) => {\n          setRelated(res.data)\n          // console.log('************', res.data)\n        })\n      })\n      .catch((err) => {\n        setLoading(false)\n        toast.error(err)\n      })\n  }\n\n  const onStarClick = (newRating, name) => {\n    if (!newRating) {\n      return toast.error('Cannot Submit Empty Rating')\n    }\n    setStar(newRating)\n    productStar(name, newRating, user.token)\n      .then((res) => {\n        loadSingleProduct()\n        toast.success('Thanks For giving Rating')\n      })\n      .catch((err) => {\n        console.log(err)\n      })\n    // console.log(newRating, name)\n  }\n\n  return (\n    <>\n      {loading ? (\n        <h4>Loading</h4>\n      ) : (\n        <>\n          <div>\n            <ProductDetailCard\n              product={product}\n              onStarClick={onStarClick}\n              star={star}\n              setModalVisible={setModalVisible}\n              modalVisible={modalVisible}\n            />\n          </div>\n          <br />\n          <br />\n          <br />\n          <br />\n          <Container>\n            <Row className='p-5'>\n              <Col className='text-center pt-5 pb-5'>\n                <h3 style={{ color: 'black' }}>Related Products</h3>\n              </Col>\n            </Row>\n            <div className='row pb-5'>\n              {related.length ? (\n                related.map((relProd) => (\n                  <div key={relProd._id} className='col-md-4'>\n                    <ProductCard product={relProd} />\n                  </div>\n                ))\n              ) : (\n                <div className='text-center col'>NO RELATED PRODUCTS FOUND</div>\n              )}\n            </div>\n          </Container>\n        </>\n      )}\n    </>\n  )\n}\n\nexport default ProductDetail\n"],"names":["useState","product","setProduct","related","setRelated","loading","setLoading","star","setStar","modalVisible","setModalVisible","slug","useParams","user","useSelector","state","useEffect","loadSingleProduct","ratings","existingRatingObject","find","ele","postedBy","toString","_id","getProductDetails","then","res","data","getRelatedProduct","catch","err","toast","onStarClick","newRating","name","productStar","token","console","log","className","style","color","length","map","relProd"],"sourceRoot":""}